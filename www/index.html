<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Travelino</title>
<link rel="shortcut icon" href="favicon.ico" />
<meta name="description"
	content="Travelino shows to the best places to travel">
<!-- Bootstrap -->
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat"
	rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Montserrat"
	rel="stylesheet">
</head>
<!-- Styles -->
<link href="css/styles.css" rel="stylesheet">
<link href="css/raisbutton.css" rel="stylesheet">
<link href="css/loader.css" rel="stylesheet">
<link href="css/login.css" rel="stylesheet">
<link href="css/carousel.css" rel="stylesheet">
<link rel="stylesheet" href="css/font-awesome.min.css">
<body>

	<nav class="navbar navbar-default"
		style="background-color: #333842; color: #ffffff;">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#myNavbar">
					<span class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="index.html" style="color: #fff">travelino</a>
			</div>
			<div class="collapse navbar-collapse" id="myNavbar">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="index.html#gallery_container">Analyze Images</a></li>
					<li><a href="index.html#love_container">Discover Places</a></li>
					<li><a href="index.html#botcontainer">Instagram</a></li>
				</ul>
			</div>
		</div>
	</nav>


	<div id="preloader" style="">
		<div id="loader"></div>
	</div>
	<div id="maincontent">
		<div class="bg-white text-center">
			<img style="width: 320px; height: auto;" src="img/travelino.gif"
				alt="travelino">
		</div>
		<div id="travelino" class="bg-white text-center">
			<div id="dino_img" style="display: inline-block">
				<div style="display: inline-block">
					<img style="width: 140px; height: auto;"
						src="img/Travelino_Icon.gif" alt="travelino_icon">
				</div>
			</div>
			<div id="bubble_img" style="display: inline-block">
				<div id="bubble_start" class="bubble"
					style="margin-top: 30px; padding-bottom: 20px; display: none">
					<span style="color: #fff; font-size: 62%;">Hi, I'm Travelino<br>
						I'll help you to
					</span><br> <span class="txt-rotate"
						style="color: #fff; font-size: 62%;" data-period="1000"
						data-rotate='[ "discover special places", "find a hotel", "travel", "analyze images", "have fun!" ]'></span>
				</div>
			</div>
		</div>
		<div id="gallery_container" class="container-fluid bg-1 text-center">
			<h2>Search for locations in pictures</h2>
			<div id="camera_btn" style="display: block; margin-top: 40px">
				<div style="display: inline-block">
					<img style="width: 100px; height: auto;" src="img/camera.png"
						alt="camera">
				</div>
				<p style="display: inline-block; margin-left: 10px">Take a new
					picture</p>
			</div>
			<div id="gallery_btn" style="display: block">
				<p style="display: inline-block; margin-right: 10px">Pick one
					from gallery</p>
				<div style="display: inline-block">
					<img style="width: 100px; height: auto;" src="img/gallery.png"
						alt="gallery">
				</div>
			</div>
			<div style="display: block; margin-top: 40px">Upload a photo to
				discover the place in the picture. You can also use an Instagram
				screenshot.</div>
		</div>
		<div id="love_container" class="container-fluid bg-2 text-center">
			<h2>Places you'll love.</h2>
			<p>I looked at your searches and discovered places you'll love.</p>
			<button data-toggle="collapse" data-target="#tagcloud" id="btn" class="button button-block raise" style="margin-top:20px">YOUR TAG CLOUD</button>
			<div id="tagcloud" style="margin-top:20px" class="collapse">
			<span class="label label-default" style="font-size:20px">Italy</span>
  			<span class="label label-default" style="font-size:15px">Rome</span>
  			<span class="label label-default" style="font-size:10px">Piazza del Arco di Costantino</span>
 			 <span class="label label-default" style="font-size:18px">Malta</span>
 			 <span class="label label-default" style="font-size:18px">Malta</span>
 			 <span class="label label-default" style="font-size:16px">00186 Roma</span>
 			 <span class="label label-default" style="font-size:13px">Rome Metropolitan Area</span>
 			 <span class="label label-default" style="font-size:15px">Lazio</span>
			</div>
		</div>
		<div class=" no-padding-margin">
			<div id="carousel-example-generic"
				class="carousel slide row no-padding-margin" data-ride="carousel">
				<!-- Indicators -->
				<ol class="carousel-indicators">
					<li data-target="#carousel-example-generic" data-slide-to="0"
						class="active"></li>
					<li data-target="#carousel-example-generic" data-slide-to="1"></li>
					<li data-target="#carousel-example-generic" data-slide-to="2"></li>
				</ol>
				<!-- Wrapper for slides -->
				<div style="background: #000000" class="carousel-inner"
					role="listbox">
					<div class="item active">
						<img style="opacity: 0.5;"
							src="https://cache-graphicslib.viator.com/graphicslib/thumbs674x446/2390/SITours/rome-super-saver-2-day-experience-including-three-rome-city-tours-and-in-rome-139042.jpg"
							alt="city1">
						<div class="carousel-caption">
							<h3>Rom.</h3>
							<p>Italy.</p>
						</div>
					</div>
					<div class="item">
						<img style="opacity: 0.5;"
							src="https://www.urlaubstracker.de/wp-content/uploads/2015/11/mailand_duomo_bei_nacht1-900x436.jpg"
							alt="city2">
						<div class="carousel-caption">
							<h3>Milan.</h3>
							<p>Italy.</p>
						</div>
					</div>
					<div class="item">
						<img style="opacity: 0.5;"
							src="http://www.telegraph.co.uk/content/dam/Travel/Destinations/Europe/Italy/Venice/venice-restaurants-by-canal-medium.jpg"
							alt="city3">
						<div class="carousel-caption">
							<h3>Venice</h3>
							<p>Italy.</p>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="botcontainer" class="container-fluid bg-1 text-center">
			<h2>Instagram.</h2>
			<p>I've connected to your Instagram '@dfrick' account, these
				places were visited by the people you follow.</p>
			<div style="margin-top: 40px">
				<div id="pamela"
					style="display: block; margin-top: 10px; border: 2px solid; text-align: left">
					<div style="display: inline-block;">
						<img style="width: 50px; height: auto;"
							src="https://instagram.ftxl1-1.fna.fbcdn.net/t51.2885-19/s320x320/22351690_121546555196968_2253146268752674816_n.jpg"
							alt="camera">
					</div>
					<p style="display: inline-block; margin-left: 10px">pamela_rf:
						Los Angeles</p>
				</div>

				<div id="check"
					style="display: block; margin-top: 10px; border: 2px solid; text-align: left">
					<div class="portrait" style="display: inline-block;">
						<img style="width: 50px; height: auto;"
							src="https://instagram.ftxl1-1.fna.fbcdn.net/t51.2885-19/17931762_1324476800934189_6669949056657129472_n.jpg"
							alt="camera">
					</div>
					<p style="display: inline-block; margin-left: 10px">check24.de:
						Surin</p>
				</div>

				<div id="bastian"
					style="display: block; margin-top: 10px; border: 2px solid; text-align: left">
					<div class="landscape" style="display: inline-block;">
						<img style="width: 50px; height: auto;"
							src="https://instagram.ftxl1-1.fna.fbcdn.net/t51.2885-19/s320x320/17663659_1664887246872883_50954340948508672_a.jpg"
							alt="camera">
					</div>
					<p style="display: inline-block; margin-left: 10px">b.schweinsteiger:
						Rome</p>
				</div>

				<button id="more_btn" class="button button-block raise"
					onClick="sendInputToBot()">MORE</button>
			</div>
		</div>
		<div id="botcontainer" class="bg-2 text-center">
			<div class="form">
				<h3>Search for Hotels.</h3>
				<div id="response" style="margin-top: 10px">
					<p>Type in the city, you want to vist.</p>
				</div>
				<div>
					<div class="field-wrap" style="margin-top: 40px">
						<input id="input" required autocomplete="off" />
					</div>
					<button id="savebtn" class="button button-block raise"
						onClick="sendInputToBot()">SEARCH</button>
				</div>
			</div>
		</div>
	</div>


	<div id="locationcontent" style="display: none">
		<div id="location_travelino" class="bg-white text-center">
			<div id="dinoimg" style="display: inline-block">
				<div style="display: inline-block">
					<img style="width: 140px; height: auto;"
						src="img/Travelino_Icon.gif" alt="travelino_icon">
				</div>
			</div>
			<div id="bubbl" style="display: inline-block">
				<div class="bubble"
					style="display: inline-block; margin-top: 30px; padding-bottom: 20px">
					<span id="location_bubble" style="color: #fff; font-size: 62%;">Looks
						like...</span> <span id="location_text"
						style="color: #fff; font-size: 62%;"> Piazza del Arco di
						Costantino, 00186 Roma RM, Italy</span>
				</div>
			</div>
		</div>
		<div id="maps_placeholder" class="text-center"></div>
		<div id="hotels" class="container-fluid bg-1 text-center">
			<h2>HOTELS</h2>
			<p>I found hotels near the place. Do you like one?</p>

			<div id="hotelcontainer"></div>
			<button id="addfilter" class="button button-block raise"
				onClick="ds()">ADD FILTER</button>

			<button id="morebtn" class="button button-block raise"
				onClick="moreHotels()">MORE HOTELS</button>
		</div>

		<div id="botcontainer" class="bg-2 text-center">
			<div class="form">
				<h3>INVITE FRIENDS.</h3>
				<div id="response" style="margin-top: 10px">
					<p>Invite friends on your travels! As soon as you are
						interested in a hotel, you can share it with your friends. Add by
						email address or Instagram account.</p>
				</div>
				<div>
					<div class="field-wrap" style="margin-top: 40px">
						<input id="input" required autocomplete="off" />
					</div>
					<button id="savebtn" class="button button-block raise"
						onClick="sendInputToBot()">INVITE</button>
				</div>
			</div>
		</div>

	</div>

	<div id="pamelaDetailed" class="container-fluid bg-1 text-center"
		style="display: none">
		<div style="float: right;">
			<i id="closePam" class="fa fa-times fa-2x" aria-hidden="true"></i>
		</div>
		<h3>pamela_rf</h3>
		<p>Los Angeles, USA</p>
		<div class="portrait" style="display: inline-block;">
			<img style="max-width: 100%; max-height: 100%;" class="img"
				src="img/pamelaShot.PNG" alt="camera">
		</div>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">EXPLORE THE CITY</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">SEARCH FOR HOTELS</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">IGNORE PAMELA_RF</button>
	</div>

	<div id="checkDetailed" class="container-fluid bg-1 text-center"
		style="display: none">
		<div style="float: right;">
			<i id="closeCheck" class="fa fa-times fa-2x" aria-hidden="true"></i>
		</div>
		<h3>check24.de</h3>
		<p>Surin, Thailand</p>
		<div class="portrait" style="display: inline-block;">
			<img style="max-width: 100%; max-height: 100%;" class="img"
				src="img/checkShot.PNG" alt="camera">
		</div>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">EXPLORE THE CITY</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">SEARCH FOR HOTELS</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">IGNORE CHECK24.DE</button>
	</div>

	<div id="bastianDetailed" class="container-fluid bg-1 text-center"
		style="display: none">
		<div style="float: right;">
			<i id="closeBastian" class="fa fa-times fa-2x" aria-hidden="true"></i>
		</div>
		<h3>bastianschweinsteiger</h3>
		<p>Rome, Italy</p>
		<div class="portrait" style="display: inline-block;">
			<img style="max-width: 100%; max-height: 100%;" class="img"
				src="img/bastianShot.PNG" alt="camera">
		</div>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">EXPLORE THE CITY</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">SEARCH FOR HOTELS</button>

		<button id="savebtn" class="button button-block raise"
			onClick="sendInputToBot()">IGNORE THIS ACCOUNT</button>
	</div>


	<!-- Footer -->
	<footer class='container-fluid bg-4 text-center'>
		<p>
			Travelino - Hackatum 2017. For more <a href='https://www.github.com'>click
				here</a>
		</p>
	</footer>
	<!-- Scripts -->
	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->

	<script type="text/javascript" src="cordova.js"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script type="text/javascript">
		
	function scrollToContainer(containerTag){
		$('html,body').animate({
	        scrollTop: $(containerTag).offset().top},
	        'slow');
	}
		
		var preloader = $("#preloader");

		$("#closePam").click(function() {
			closeDetail("#pamelaDetailed");
			
		});
		$("#closeCheck").click(function() {
			closeDetail("#checkDetailed");
		});
		$("#closeBastian").click(function() {
			closeDetail("#bastianDetailed");
		});
		
		function closeDetail(container){
			$("#maincontent").fadeIn(1000);
			$(container).hide(1000);
			scrollToContainer("#botcontainer");
		}

		$("#gallery_btn").click(function() {
			preloader.fadeIn();
			onTakeExisting();

		});

		$("#camera_btn").click(function() {
			preloader.fadeIn();
			onTakePicture();

		});

		$("#pamela").click(function() {
			$("#pamelaDetailed").fadeIn();
			$("#maincontent").hide();
			scrollToContainer("#closePam");

		});

		$("#check").click(function() {
			$("#checkDetailed").fadeIn();
			$("#maincontent").hide();
			scrollToContainer("#closeCheck");
		});

		$("#bastian").click(function() {
			$("#bastianDetailed").fadeIn();
			$("#maincontent").hide();
			scrollToContainer("#closeBastian");
		});

		var TxtRotate = function(el, toRotate, period) {
			this.toRotate = toRotate;
			this.el = el;
			this.loopNum = 0;
			this.period = parseInt(period, 10) || 2000;
			this.txt = '';
			this.tick();
			this.isDeleting = false;
		};

		TxtRotate.prototype.tick = function() {
			var i = this.loopNum % this.toRotate.length;
			var fullTxt = this.toRotate[i];

			if (this.isDeleting) {
				this.txt = fullTxt.substring(0, this.txt.length - 1);
			} else {
				this.txt = fullTxt.substring(0, this.txt.length + 1);
			}

			this.el.innerHTML = "<span class='wrap'>" + this.txt + "</span>";

			var that = this;
			var delta = 300 - Math.random() * 100;

			if (this.isDeleting) {
				delta /= 2;
			}

			if (!this.isDeleting && this.txt === fullTxt) {
				delta = this.period;
				this.isDeleting = true;
			} else if (this.isDeleting && this.txt === '') {
				this.isDeleting = false;
				this.loopNum++;
				delta = 500;
			}

			setTimeout(function() {
				that.tick();
			}, delta);
		};

		window.onload = function() {
			preloader.hide();
			$("#bubble_start").fadeIn(3000);
			var elements = document.getElementsByClassName('txt-rotate');
			for (var i = 0; i < elements.length; i++) {
				var toRotate = elements[i].getAttribute('data-rotate');
				var period = elements[i].getAttribute('data-period');
				if (toRotate) {
					new TxtRotate(elements[i], JSON.parse(toRotate), period);
				}
			}
			// INJECT CSS
			var css = document.createElement("style");
			css.type = "text/css";
			css.innerHTML = ".txt-rotate > .wrap { border-right: 0.08em solid #fff }";
			document.body.appendChild(css);

		};

		function onTakeExisting() {
			navigator.camera.getPicture(onSuccess, onFail, {
				quality : 50,
				destinationType : Camera.DestinationType.DATA_URL,
				correctOrientation : true,
				sourceType : Camera.PictureSourceType.PHOTOLIBRARY
			});

			function onSuccess(imageData) {
				connectToBackend(imageData);
			}

			function onFail(message) {
				alert("Could not open gallery");
				preloader.hide();
			}
		}
		var widthWindow = $(window).width();

		function onTakePicture() {
			navigator.camera.getPicture(onSuccess, onFail, {
				quality : 50,
				correctOrientation : true,
				destinationType : Camera.DestinationType.DATA_URL
			});

			function onSuccess(imageData) {
				connectToBackend(imageData);
			}

			function onFail(message) {
				alert("Could not open camera");
				preloader.hide();
			}
		}
		var hotelCounter;
		var openHotels = 3;
		var hotels;

		function connectToBackend(imageData) {
			$
					.ajax({
						method : "POST",
						url : "https://travelino.cfapps.io/googlevision",
						contentType : "application/json",
						data : JSON.stringify({
							base64 : imageData
						})
					})
					.done(
							function(data) {
								$("#location_text").text(data.locationName);
								$('#maps_placeholder').empty();
								//$('#maps_placeholder').append("<iframe style='width:100%; height:100%;' frameborder='0' style='border:0' src='https://www.google.com/maps/embed/v1/place?key=AIzaSyDwF2C571_X5Xc1sajYIa3yxeYZDT7NNF0&q=Piazza del Arco di Costantino, 00186 Roma RM, Italy'> </iframe>");
								$('#maps_placeholder')
										.append(
												"<img style='max-height: 300px; min-width: 100px' src='data:image/jpg;base64," +  imageData +"'></img>");
								$('#maps_placeholder').width(widthWindow);

								$("#maincontent").hide();
								$("#locationcontent").fadeIn();
								scrollToContainer("#location_travelino");
								hotels = data.hotels;
								loadHotels();

								preloader.hide();
							}).fail(function(data) {
						alert("failed");
						preloader.hide();
					});
		}

		function loadHotels() {
			$("#hotelcontainer").empty();
			for (hotelCounter = 0; hotelCounter < openHotels; hotelCounter++) {
				var url = decodeURIComponent(hotels[hotelCounter].image_url);

				if (url === "false") {
					url = "img/logo.png"
				}
				var rating;
				if (hotels[hotelCounter].rating_average < 2) {
					rating = "<i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i>";

				} else if (hotels[hotelCounter].rating_average < 4) {
					rating = "<i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i>";
				} else if (hotels[hotelCounter].rating_average < 6) {
					rating = "<i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i>";
				} else if (hotels[hotelCounter].rating_average < 8) {
					rating = "<i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i>";
				} else if (hotels[hotelCounter].rating_average <= 10) {
					rating = "<i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star' aria-hidden='true' style='display:inline-block'></i> <i class='fa fa-star-o' aria-hidden='true' style='display:inline-block'></i>";
				}

				$("#hotelcontainer")
						.append(
								"<div id='hotel"+ hotelCounter +"' style='border: 2px solid;margin-top:5px'> <div class='media'> <div class='media-left'> <img src='"+ url +"' class='media-object' style='width:130px'> </div> <div class='media-body'> <h4 class='media-heading' style='margin-top:5px'>"
										+ hotels[hotelCounter].name
										+ "</h4> <p>"
										+ hotels[hotelCounter].price
										+ " "
										+ hotels[hotelCounter].currency
										+ "</p> <h5>"
										+ hotels[hotelCounter].street
										+ "</h5> <div> "
										+ rating
										+ "</div> </div> </div> </div> ");
			}
		}

		$("#morebtn").click(function() {
			openHotels = openHotels + 3;
			loadHotels();
		});

		function onShowPamela() {
			preloader.hide();

			document.getElementById("pamelaDetailed").style.display = "block";
		}

		function onShowCheck() {
			preloader.hide();

			document.getElementById("checkDetailed").style.display = "block";
		}

		function onShowBastian() {
			preloader.hide();

			document.getElementById("bastianDetailed").style.display = "block";
		}
	</script>
	<script
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh5cCTxFcbtQd4f3r6d-QS2ksbS38CqN0&callback=initMap"
		async defer></script>

</body>
</html>

